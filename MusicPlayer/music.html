<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/all.min.css" integrity="sha512-BnbUDfEUfV0Slx6TunuB042k9tuKe3xrD6q4mg5Ed72LTgzDIcLPxg6yI2gcMFRyomt+yJJxE+zJwNmxki6/RA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="main_div">
        <div class="music_container">
            <h2 id="title">Higher</h2>
            <h3 id="artist">Joe Layne</h3>
            <div class="img_container">
                <img src="images/song-1.jpg" alt="">
            </div>
            <audio src="music/song-1.mp3"></audio> 
            <!-- the above audio tag will be visible on the website only when we use "controls" attribute. Since we don't want to make this part visible using html on the screen we will not use "controls". We will add controls using Javascript. 
            E.g.: <audio src="music/song-1.mp3" controls></audio>  -->

            <!-- controls  -->
            <div class="music_controls">
                <i class="fa fa-solid fa-backward" id="prev" title="Previous"></i>
                <i class="fa fa-solid fa-play play_button" id="play" title="Play"></i>
                <i class="fa fa-solid fa-forward" id="next" title="Next"></i>
            </div>
        </div>
    </div>

    <script>
        // querySelector is used to select an entire tag/element 
        const music = document.querySelector("audio"); 
        const img = document.querySelector("img");
        const play = document.getElementById("play");
        const title = document.getElementById("title");
        const artist = document.getElementById("artist");
        const prev = document.getElementById("prev");
        const next = document.getElementById("next");

        //array of an object {property:value}
        const songs = [
            {name:"song-1", title:"Higher", artist: "Joe Layne"}, 
            {name:"song-2", title:"Heaven", artist:"Joe Layne"},
            {name:"song-3", title:"Heatwaves", artist:"Glass Animals"},
            {name:"song-4", title:"Glorious", artist:"Macklemore"},
        ]
        
        let isPlaying = false;
        // for play functionality
        const playMusic = () => {
            isPlaying = true;
            music.play();
            play.classList.replace("fa-play", "fa-pause");
            img.classList.add("anime");
        };

        // for pause functionality 
        const pauseMusic = () => {
            isPlaying = false;
            music.pause();
            play.classList.replace("fa-pause", "fa-play");
            img.classList.remove("anime");
        };

        // hard coded play and pause function calling 
        //  play.addEventListener('click', () => {
        //     if(isPlaying) {
        //         pauseMusic();
        //     }
        //     else{
        //         playMusic();
        //     }
        // }); 

        // play and pause function calling using ternary operator 
        play.addEventListener('click', () => {
            isPlaying ? pauseMusic() : playMusic(); 
        });

        //change music

        const loadSong = (songs) => {
            title.textContent = songs.title;
            artist.textContent = songs.artist; 
            music.src = "music/" + songs.name + ".mp3";
            img.src = "images/" + songs.name + ".jpg";
        }; 

        songIndex = 0;
        //loadSong(songs[0]);

        const nextSong = () => {
            songIndex = (songIndex + 1) % songs.length;
            loadSong(songs[songIndex]);
            playMusic();
        };

        const prevSong = () => {
            songIndex = (songIndex - 1 + songs.length) % songs.length;
            loadSong(songs[songIndex]);
            playMusic();
        };

        next.addEventListener('click', nextSong);
        prev.addEventListener('click', prevSong);

    </script>
</body>
</html>
